"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[331],{2320:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"integrations/dify","title":"Dify Integration Guide","description":"Connect your Dify AI applications to PrecogX for comprehensive security monitoring and threat detection.","source":"@site/docs/integrations/dify.md","sourceDirName":"integrations","slug":"/integrations/dify","permalink":"/docs/integrations/dify","draft":false,"unlisted":false,"editUrl":"https://github.com/precogxai/precogx-docs/tree/main/docs/integrations/dify.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"n8n Integration Guide","permalink":"/docs/integrations/n8n"},"next":{"title":"API Reference","permalink":"/docs/api-reference"}}');var r=t(4848),o=t(8453);const s={},a="Dify Integration Guide",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Integration Methods",id:"integration-methods",level:2},{value:"Method 1: Webhook Integration (Recommended)",id:"method-1-webhook-integration-recommended",level:3},{value:"Step 1: Configure Webhook in Dify",id:"step-1-configure-webhook-in-dify",level:4},{value:"Step 2: Webhook Configuration",id:"step-2-webhook-configuration",level:4},{value:"Step 3: Configure Payload Template",id:"step-3-configure-payload-template",level:4},{value:"Method 2: API Integration",id:"method-2-api-integration",level:3},{value:"Step 1: Create Custom Node",id:"step-1-create-custom-node",level:4},{value:"Method 3: External Service Integration",id:"method-3-external-service-integration",level:3},{value:"Step 1: Create External Service",id:"step-1-create-external-service",level:4},{value:"Step 2: Use in Workflow",id:"step-2-use-in-workflow",level:4},{value:"Dify Application Types",id:"dify-application-types",level:2},{value:"Chat Applications",id:"chat-applications",level:3},{value:"Agent Applications",id:"agent-applications",level:3},{value:"Workflow Applications",id:"workflow-applications",level:3},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Customer Support Bot",id:"customer-support-bot",level:3},{value:"Content Generation",id:"content-generation",level:3},{value:"Document Q&amp;A",id:"document-qa",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Testing Your Integration",id:"testing-your-integration",level:2},{value:"1. Test Webhook",id:"1-test-webhook",level:3},{value:"2. Manual Test",id:"2-manual-test",level:3},{value:"3. Verify in PrecogX Dashboard",id:"3-verify-in-precogx-dashboard",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Tips",id:"debug-tips",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Custom Agent Naming",id:"custom-agent-naming",level:3},{value:"Conversation Context",id:"conversation-context",level:3},{value:"Multi-Model Tracking",id:"multi-model-tracking",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Security",id:"security",level:3},{value:"Performance",id:"performance",level:3},{value:"Monitoring",id:"monitoring",level:3},{value:"Support",id:"support",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dify-integration-guide",children:"Dify Integration Guide"})}),"\n",(0,r.jsx)(n.p,{children:"Connect your Dify AI applications to PrecogX for comprehensive security monitoring and threat detection."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Dify is an open-source LLM app development platform that combines AI workflow, RAG pipeline, agent capabilities, model management, observability features and more. By integrating PrecogX with Dify, you can monitor all AI interactions for security threats, prompt injections, PII leakage, and other risks in real-time."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Active PrecogX account (",(0,r.jsx)(n.a,{href:"https://app.precogx.ai",children:"sign up free"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"PrecogX API key (create in Settings \u2192 API Keys)"}),"\n",(0,r.jsx)(n.li,{children:"Running Dify instance (v0.6.0 or later)"}),"\n",(0,r.jsx)(n.li,{children:"Dify applications with AI workflows"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integration-methods",children:"Integration Methods"}),"\n",(0,r.jsx)(n.h3,{id:"method-1-webhook-integration-recommended",children:"Method 1: Webhook Integration (Recommended)"}),"\n",(0,r.jsx)(n.p,{children:"Use Dify's webhook feature to send telemetry data to PrecogX automatically."}),"\n",(0,r.jsx)(n.h4,{id:"step-1-configure-webhook-in-dify",children:"Step 1: Configure Webhook in Dify"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Open your Dify application"}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Integrations"})]}),"\n",(0,r.jsxs)(n.li,{children:["Find the ",(0,r.jsx)(n.strong,{children:"Webhooks"})," section"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Add Webhook"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"step-2-webhook-configuration",children:"Step 2: Webhook Configuration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Webhook URL:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"https://api.precogx.ai/api/v1/integrations/dify/telemetry\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Method:"})," ",(0,r.jsx)(n.code,{children:"POST"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "application/json",\n  "x-api-key": "px_live_your_actual_api_key_here"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Events to Monitor:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"conversation.started"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"conversation.completed"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"message.created"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"workflow.executed"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"step-3-configure-payload-template",children:"Step 3: Configure Payload Template"}),"\n",(0,r.jsx)(n.p,{children:"Dify will send webhook data automatically. The payload will include:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "agentId": "dify-{{app_id}}",\n  "prompt": "{{conversation.query}}",\n  "response": "{{conversation.answer}}",\n  "appId": "{{app_id}}",\n  "conversationId": "{{conversation_id}}",\n  "userId": "{{user_id}}",\n  "metadata": {\n    "timestamp": "{{created_at}}",\n    "platform": "dify",\n    "app_name": "{{app_name}}",\n    "conversation_mode": "{{conversation_mode}}",\n    "model_name": "{{model_name}}"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"method-2-api-integration",children:"Method 2: API Integration"}),"\n",(0,r.jsx)(n.p,{children:"For more control, use Dify's API with custom code to send telemetry."}),"\n",(0,r.jsx)(n.h4,{id:"step-1-create-custom-node",children:"Step 1: Create Custom Node"}),"\n",(0,r.jsxs)(n.p,{children:["In your Dify workflow, add a ",(0,r.jsx)(n.strong,{children:"Code"})," node after your LLM interactions:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import requests\nimport json\nfrom datetime import datetime\n\ndef send_precogx_telemetry(input_data):\n    \"\"\"Send telemetry data to PrecogX\"\"\"\n    \n    # Extract conversation data\n    prompt = input_data.get('query', '')\n    response = input_data.get('answer', '')\n    app_id = input_data.get('app_id', 'unknown')\n    \n    # Prepare telemetry payload\n    telemetry_data = {\n        \"agentId\": f\"dify-{app_id}\",\n        \"prompt\": prompt,\n        \"response\": response,\n        \"appId\": app_id,\n        \"conversationId\": input_data.get('conversation_id'),\n        \"userId\": input_data.get('user_id'),\n        \"metadata\": {\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"platform\": \"dify\",\n            \"app_name\": input_data.get('app_name', ''),\n            \"conversation_mode\": input_data.get('mode', ''),\n            \"model_name\": input_data.get('model_name', ''),\n            \"tokens_used\": input_data.get('usage', {}).get('total_tokens', 0)\n        }\n    }\n    \n    try:\n        response = requests.post(\n            'https://api.precogx.ai/api/v1/integrations/dify/telemetry',\n            headers={\n                'Content-Type': 'application/json',\n                'x-api-key': 'px_live_your_actual_api_key_here'\n            },\n            json=telemetry_data,\n            timeout=10\n        )\n        \n        if response.status_code == 200:\n            print(\"PrecogX telemetry sent successfully\")\n        else:\n            print(f\"PrecogX telemetry failed: {response.status_code}\")\n            \n    except Exception as e:\n        print(f\"PrecogX telemetry error: {str(e)}\")\n    \n    # Return original input to continue workflow\n    return input_data\n\n# Execute telemetry function\nresult = send_precogx_telemetry(input)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"method-3-external-service-integration",children:"Method 3: External Service Integration"}),"\n",(0,r.jsx)(n.p,{children:"Use Dify's external service capability to integrate with PrecogX."}),"\n",(0,r.jsx)(n.h4,{id:"step-1-create-external-service",children:"Step 1: Create External Service"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In Dify, go to ",(0,r.jsx)(n.strong,{children:"Tools"})," \u2192 ",(0,r.jsx)(n.strong,{children:"External Services"})]}),"\n",(0,r.jsx)(n.li,{children:"Create a new service for PrecogX"}),"\n",(0,r.jsx)(n.li,{children:"Configure the service endpoint"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Service Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"name: precogx-telemetry\ndescription: Send security telemetry to PrecogX\nendpoint: https://api.precogx.ai/api/v1/integrations/dify/telemetry\nmethod: POST\nheaders:\n  Content-Type: application/json\n  x-api-key: px_live_your_actual_api_key_here\n"})}),"\n",(0,r.jsx)(n.h4,{id:"step-2-use-in-workflow",children:"Step 2: Use in Workflow"}),"\n",(0,r.jsx)(n.p,{children:"Add the external service call in your workflow:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "service": "precogx-telemetry",\n  "payload": {\n    "agentId": "{{app.id}}",\n    "prompt": "{{conversation.query}}",\n    "response": "{{conversation.answer}}",\n    "appId": "{{app.id}}",\n    "conversationId": "{{conversation.id}}",\n    "metadata": {\n      "platform": "dify",\n      "timestamp": "{{now}}"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"dify-application-types",children:"Dify Application Types"}),"\n",(0,r.jsx)(n.h3,{id:"chat-applications",children:"Chat Applications"}),"\n",(0,r.jsx)(n.p,{children:"For conversational AI applications:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def send_chat_telemetry(conversation_data):\n    telemetry = {\n        "agentId": f"dify-chat-{conversation_data[\'app_id\']}",\n        "prompt": conversation_data[\'query\'],\n        "response": conversation_data[\'answer\'],\n        "appId": conversation_data[\'app_id\'],\n        "conversationId": conversation_data[\'conversation_id\'],\n        "metadata": {\n            "platform": "dify",\n            "app_type": "chat",\n            "conversation_mode": "chat",\n            "model_provider": conversation_data.get(\'model_provider\'),\n            "model_name": conversation_data.get(\'model_name\')\n        }\n    }\n    return telemetry\n'})}),"\n",(0,r.jsx)(n.h3,{id:"agent-applications",children:"Agent Applications"}),"\n",(0,r.jsx)(n.p,{children:"For agent-based applications with tools:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def send_agent_telemetry(agent_data):\n    telemetry = {\n        "agentId": f"dify-agent-{agent_data[\'app_id\']}",\n        "prompt": agent_data[\'query\'],\n        "response": agent_data[\'answer\'],\n        "appId": agent_data[\'app_id\'],\n        "metadata": {\n            "platform": "dify",\n            "app_type": "agent",\n            "tools_used": agent_data.get(\'tools_used\', []),\n            "agent_strategy": agent_data.get(\'strategy\'),\n            "iterations": agent_data.get(\'iterations\', 1)\n        },\n        "toolCalls": [\n            {\n                "name": tool[\'name\'],\n                "input": tool[\'input\'],\n                "output": tool[\'output\']\n            } for tool in agent_data.get(\'tool_calls\', [])\n        ]\n    }\n    return telemetry\n'})}),"\n",(0,r.jsx)(n.h3,{id:"workflow-applications",children:"Workflow Applications"}),"\n",(0,r.jsx)(n.p,{children:"For complex workflow applications:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def send_workflow_telemetry(workflow_data):\n    telemetry = {\n        "agentId": f"dify-workflow-{workflow_data[\'app_id\']}",\n        "prompt": workflow_data[\'inputs\'],\n        "response": workflow_data[\'outputs\'],\n        "appId": workflow_data[\'app_id\'],\n        "metadata": {\n            "platform": "dify",\n            "app_type": "workflow",\n            "workflow_id": workflow_data[\'workflow_id\'],\n            "execution_time": workflow_data.get(\'execution_time\'),\n            "nodes_executed": workflow_data.get(\'nodes_executed\', [])\n        }\n    }\n    return telemetry\n'})}),"\n",(0,r.jsx)(n.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,r.jsx)(n.h3,{id:"customer-support-bot",children:"Customer Support Bot"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Dify customer support application\ndef customer_support_telemetry(data):\n    return {\n        "agentId": "dify-customer-support",\n        "prompt": data[\'customer_query\'],\n        "response": data[\'support_response\'],\n        "appId": data[\'app_id\'],\n        "conversationId": data[\'conversation_id\'],\n        "userId": data[\'customer_id\'],\n        "metadata": {\n            "platform": "dify",\n            "department": "customer_support",\n            "ticket_category": data.get(\'category\'),\n            "urgency": data.get(\'urgency\'),\n            "satisfaction_score": data.get(\'satisfaction\')\n        }\n    }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"content-generation",children:"Content Generation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Dify content generation application\ndef content_generation_telemetry(data):\n    return {\n        "agentId": "dify-content-generator",\n        "prompt": data[\'content_brief\'],\n        "response": data[\'generated_content\'],\n        "appId": data[\'app_id\'],\n        "metadata": {\n            "platform": "dify",\n            "content_type": data.get(\'content_type\'),\n            "target_audience": data.get(\'audience\'),\n            "word_count": len(data[\'generated_content\'].split()),\n            "tone": data.get(\'tone\'),\n            "language": data.get(\'language\', \'en\')\n        }\n    }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"document-qa",children:"Document Q&A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Dify RAG-based document Q&A\ndef document_qa_telemetry(data):\n    return {\n        "agentId": "dify-document-qa",\n        "prompt": data[\'question\'],\n        "response": data[\'answer\'],\n        "appId": data[\'app_id\'],\n        "metadata": {\n            "platform": "dify",\n            "app_type": "rag",\n            "documents_referenced": data.get(\'source_documents\', []),\n            "retrieval_score": data.get(\'retrieval_score\'),\n            "knowledge_base": data.get(\'knowledge_base_id\')\n        }\n    }\n'})}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"Store your PrecogX API key securely in Dify:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"In Dify Environment Variables:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Environment Variables"})]}),"\n",(0,r.jsxs)(n.li,{children:["Add: ",(0,r.jsx)(n.code,{children:"PRECOGX_API_KEY=px_live_your_actual_api_key_here"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"In Code Nodes:"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import os\napi_key = os.environ.get('PRECOGX_API_KEY')\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"In Webhook Configuration:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "x-api-key": "{{env.PRECOGX_API_KEY}}"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"testing-your-integration",children:"Testing Your Integration"}),"\n",(0,r.jsx)(n.h3,{id:"1-test-webhook",children:"1. Test Webhook"}),"\n",(0,r.jsx)(n.p,{children:"Create a test conversation in your Dify app:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Start a conversation with your Dify application"}),"\n",(0,r.jsx)(n.li,{children:"Send a test message"}),"\n",(0,r.jsx)(n.li,{children:"Check Dify's webhook logs for successful delivery"}),"\n",(0,r.jsx)(n.li,{children:"Verify data appears in PrecogX dashboard"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-manual-test",children:"2. Manual Test"}),"\n",(0,r.jsx)(n.p,{children:"Use curl to test the endpoint directly:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://api.precogx.ai/api/v1/integrations/dify/telemetry \\\n  -H "Content-Type: application/json" \\\n  -H "x-api-key: px_live_your_actual_api_key_here" \\\n  -d \'{\n    "agentId": "dify-test-app",\n    "prompt": "Hello, this is a test message",\n    "response": "Hi! I received your test message successfully.",\n    "appId": "test-app-123",\n    "conversationId": "conv-456",\n    "userId": "user-789",\n    "metadata": {\n      "platform": "dify",\n      "test": true\n    }\n  }\'\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-verify-in-precogx-dashboard",children:"3. Verify in PrecogX Dashboard"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.a,{href:"https://app.precogx.ai/dashboard",children:"PrecogX Dashboard"})]}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Agents"})," to see your Dify applications"]}),"\n",(0,r.jsxs)(n.li,{children:["Check ",(0,r.jsx)(n.strong,{children:"Overview"})," for interaction metrics"]}),"\n",(0,r.jsxs)(n.li,{children:["Review ",(0,r.jsx)(n.strong,{children:"Detections"})," for security alerts"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Webhook Not Firing"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check webhook configuration in Dify settings"}),"\n",(0,r.jsx)(n.li,{children:"Verify the webhook URL is correct"}),"\n",(0,r.jsx)(n.li,{children:"Ensure events are properly selected"}),"\n",(0,r.jsx)(n.li,{children:"Check Dify logs for webhook errors"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"401 Unauthorized"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify your PrecogX API key is correct"}),"\n",(0,r.jsxs)(n.li,{children:["Check the header name is exactly ",(0,r.jsx)(n.code,{children:"x-api-key"})]}),"\n",(0,r.jsx)(n.li,{children:"Ensure your account tier supports API access"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Missing Data in Dashboard"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Confirm the JSON payload structure"}),"\n",(0,r.jsxs)(n.li,{children:["Check that ",(0,r.jsx)(n.code,{children:"agentId"})," is a valid string"]}),"\n",(0,r.jsx)(n.li,{children:"Verify required fields are present"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance Issues"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement error handling to prevent app slowdown"}),"\n",(0,r.jsx)(n.li,{children:"Consider async telemetry for high-volume apps"}),"\n",(0,r.jsx)(n.li,{children:"Monitor API rate limits"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"debug-tips",children:"Debug Tips"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Enable Dify Debug Logs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Go to Dify Settings \u2192 Debug"}),"\n",(0,r.jsx)(n.li,{children:"Enable webhook logging"}),"\n",(0,r.jsx)(n.li,{children:"Check logs for telemetry requests"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Add Logging to Code Nodes:"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'print(f"Sending telemetry: {json.dumps(telemetry_data, indent=2)}")\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test Webhook Delivery:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use tools like ngrok for local testing"}),"\n",(0,r.jsx)(n.li,{children:"Check webhook response codes"}),"\n",(0,r.jsx)(n.li,{children:"Verify payload format"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,r.jsx)(n.h3,{id:"custom-agent-naming",children:"Custom Agent Naming"}),"\n",(0,r.jsx)(n.p,{children:"Use dynamic agent names based on Dify app context:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"agent_id = f\"dify-{app_data['name'].lower().replace(' ', '-')}-{app_data['environment']}\"\n"})}),"\n",(0,r.jsx)(n.h3,{id:"conversation-context",children:"Conversation Context"}),"\n",(0,r.jsx)(n.p,{children:"Include conversation history for better analysis:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'metadata = {\n    "platform": "dify",\n    "conversation_history": conversation_data.get(\'history\', []),\n    "conversation_length": len(conversation_data.get(\'history\', [])),\n    "user_session_duration": calculate_session_duration(conversation_data)\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"multi-model-tracking",children:"Multi-Model Tracking"}),"\n",(0,r.jsx)(n.p,{children:"Track different models used in your Dify app:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"metadata = {\n    \"platform\": \"dify\",\n    \"primary_model\": app_data['model_config']['model'],\n    \"model_provider\": app_data['model_config']['provider'],\n    \"temperature\": app_data['model_config'].get('temperature'),\n    \"max_tokens\": app_data['model_config'].get('max_tokens')\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use environment variables"})," for API keys"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate webhook signatures"})," (if supported by Dify)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Filter sensitive data"})," before sending telemetry"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enable HTTPS"})," for all webhook endpoints"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Make telemetry non-blocking"})," in code nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement retry logic"})," for failed requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use batching"})," for high-volume applications"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Monitor webhook response times"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set up alerts"})," for failed webhooks"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Monitor Dify application performance"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Track PrecogX API usage"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review security analytics"})," regularly"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,r.jsx)(n.p,{children:"Need help with your Dify integration?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ud83d\udce7 ",(0,r.jsx)(n.strong,{children:"Email"}),": ",(0,r.jsx)(n.a,{href:"mailto:support@precogx.ai",children:"support@precogx.ai"})]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcac ",(0,r.jsx)(n.strong,{children:"Chat"}),": Available in your PrecogX dashboard"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.strong,{children:"Documentation"}),": ",(0,r.jsx)(n.a,{href:"https://docs.precogx.ai",children:"docs.precogx.ai"})]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udc1b ",(0,r.jsx)(n.strong,{children:"Issues"}),": Report bugs on our GitHub"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"After setting up your Dify integration:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure Detection Rules"}),": Set up custom security rules in PrecogX"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set Up Notifications"}),": Configure alerts for security events"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor Application Security"}),": Review Dify app security metrics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scale Your Applications"}),": Explore advanced PrecogX features"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ready to secure your Dify AI applications?"})," ",(0,r.jsx)(n.a,{href:"https://app.precogx.ai/signup",children:"Start your free PrecogX trial today!"})]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);